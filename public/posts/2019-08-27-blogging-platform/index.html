<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>How to set up a Hugo-powered blog platform on AWS - Finleap Tech Blog</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="How to set up a Hugo-powered blog platform on AWS" />
<meta property="og:description" content="This is the process for setting up a Hugo-powered blog platform using AWS services and Gitlab." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.finleap.tech/posts/2019-08-27-blogging-platform/" />
<meta property="article:published_time" content="2019-08-27T10:15:52+02:00" />
<meta property="article:modified_time" content="2019-08-27T10:15:52+02:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How to set up a Hugo-powered blog platform on AWS"/>
<meta name="twitter:description" content="This is the process for setting up a Hugo-powered blog platform using AWS services and Gitlab."/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:500,100,300" rel="stylesheet">

	<link rel="stylesheet" type="text/css" media="screen" href="/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" /><script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script><script src="/js/main.js"></script>
</head>

<body>
	<div class="container wrapper post">
		<div class="header">
	<h1 class="site-title">Finleap Tech Blog</h1>
	<div class="site-description"><h2>Interesting things that the Finleap tech team have been doing</h2><nav class="nav social">
			<ul class="flat"><a href="https://github.com/finleap" title="Github"><i data-feather="github"></i></a><a href="https://twitter.com/finleap" title="Twitter"><i data-feather="twitter"></i></a><a href="https://www.instagram.com/finleap_gmbh" title="Instagram"><i data-feather="instagram"></i></a></ul>
		</nav>
	</div>
	
	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		
			<div class="post-header">
				<h1 class="title">How to set up a Hugo-powered blog platform on AWS</h1>
				<div class="meta">
					27 Aug 2019
				</div>
		</div>
		


		<div class="markdown">
			

<p>This is the process for setting up a Hugo-powered blog platform using AWS services and Gitlab.</p>

<p>Hugo is a static site generator written in Go - it takes content written in Markdown format and generates flat HTML which can then be served by any number of web server platforms.</p>

<p>The advantages of using a static site generator over a content management system are speed and flexibility. Flat HTML files can be delivered by a variety of servers ranging from S3 through to a fully-fledged web server like Nginx; and the lack of need for databases and interpreted platforms like PHP or Rails makes setup and configuration much less complicated.</p>

<p>This post is a complete walkthrough of how to set up a blog using Hugo, AWS and Gitlab. You could substitute another combination of version control and continuous integration service for Gitlab, but this offers a simple CI pipeline that allows deployment in response to merging a pull request.</p>

<p>The process has a number of moving parts:</p>

<ul>
<li><a href="https://gohugo.io">Hugo</a> to generate the site content</li>
<li><a href="https://gitlab.com">Gitlab</a> to host the source code, and provide the CI workflow for automatic build and deployment</li>
<li><a href="https://aws.amazon.com/s3">S3</a> to store and serve the site itself</li>
<li><a href="https://aws.amazon.com/cloudfront">CloudFront</a> to front S3 to provide a CDN and serve over HTTPS</li>
<li><a href="https://aws.amazon.com/cloudformation">CloudFormation</a> and <a href="https://aws.amazon.com/lambda">Lambda</a> to provide a workaround for a specific limitation of S3 web serving</li>
<li><a href="https://aws.amazon.com/certificate-manager">Certificate Manager</a> to create SSL certificates to enable serving the site over HTTPS</li>
<li><a href="https://aws.amazon.com/route53">Route53</a> to manage DNS</li>
</ul>

<p>This looks complicated, but the end result will be a site that can securely served, and updated with a pull request-based workflow.</p>

<h1 id="contents">Contents</h1>

<ul>
<li><a href="#SettingUpHugo">Setting up Hugo</a></li>
<li><a href="#SettingUpGitlab">Setting up Gitlab</a></li>
<li><a href="#Route53Setup">Configuring domains with Route53</a></li>
</ul>

<h3 id="a-id-settinguphugo-a-setting-up-hugo"><a id="SettingUpHugo"></a>Setting up Hugo</h3>

<p>Hugo is a static site generator that builds pages when you create or update your content. It&rsquo;s written in Go, and can be run on Windows, MacOS and Linux to generate HTML content and assets.</p>

<p>To get going with Hugo, follow the <a href="https://gohugo.io/getting-started/quick-start/">quick start guide</a> on the Hugo site. This will walk you through installing and configuring Hugo, together with setting up a theme and generating a test page.</p>

<p>Once you&rsquo;ve got a test page visible using the local Hugo server, you&rsquo;ll need to get your site project under Git source control:</p>

<ol>
<li>Switch to the <code>quickstart</code> directory that was created during the Hugo setup process</li>
<li>Initialise a Git repository:

<ul>
<li><code>git init</code></li>
</ul></li>
<li>Add the files created so far:

<ul>
<li><code>git add .</code></li>
</ul></li>
<li>Commit the files:

<ul>
<li><code>git commit -am 'Initial commit'</code></li>
</ul></li>
</ol>

<h3 id="a-id-settingupgitlab-a-setting-up-gitlab"><a id="SettingUpGitlab"></a>Setting up Gitlab</h3>

<p><a href="https://gitlab.com/">Gitlab</a> is a hosted, Git-based source code repository which also provides continuous integration and deployment features. We&rsquo;ll use it for three purposes:</p>

<ul>
<li>hosting the source code</li>
<li>managing the pull request process for adding new site content</li>
<li>building and deploying the generated HTML content</li>
</ul>

<p>It&rsquo;s worth noting at this point that the HTML assets that you generate locally with Hugo <em>aren&rsquo;t</em> the assets that are eventually uploaded and served from S3. These live assets are instead generated and uploaded from directly from Gitlab to S3 using the continuous deployment feature.</p>

<p><to complete></p>

<h3 id="a-id-s3setup-a-s3-setup"><a id="S3Setup"></a>S3 setup</h3>

<p>The HTML assets of the site will be stored and served from an S3 bucket. S3 can act as a basic web server, with some limitations - flat HTML and asset files only, with no server-side components - and needs a slight tweak from a CloudFormation stack to handle some Hugo-specific behaviour.</p>

<p>To set up the S3 component:</p>

<ol>
<li>Sign into the (S3 console)[<a href="https://console.aws.amazon.com/s3">https://console.aws.amazon.com/s3</a>]</li>
<li>Click on the <code>Create bucket</code> button</li>
<li>Give the bucket a name - something like <code>www.mysite.name</code> will help to identify it easily later</li>
<li>Choose your region from the dropdown list</li>
<li>Click <code>Next</code> to move to the <code>Configure options</code> page</li>
<li>Leave all the settings as the defaults, and click <code>Next</code> to move to the <code>Permissions</code> page</li>
<li><em>Uncheck</em> the <code>Block public access</code> checkbox so that the assets in the bucket can be read by the public. You&rsquo;ll set the actual permissions later in the deployment stage.</li>
<li>Click the <code>Next</code> button to accept and move to the <code>Review</code> page</li>
<li>Click the <code>Create bucket</code> link to create the bucket.</li>
</ol>

<p>The bucket will be created, and will appear in the list.</p>

<h3 id="a-id-cloudfrontsetup-a-cloudfront-setup"><a id="CloudFrontSetup"></a>CloudFront setup</h3>

<h3 id="a-id-cloudformationsetup-a-cloudformation-setup"><a id="CloudFormationSetup"></a>CloudFormation setup</h3>

<h3 id="a-id-cloudfrontsetup-a-cloudfront-setup-1"><a id="CloudfrontSetup"></a>CloudFront setup</h3>

<h3 id="a-id-certificatemanager-a-https-certificate-setup"><a id="CertificateManager"></a>HTTPS certificate setup</h3>

<h3 id="a-id-route53setup-a-route53-setup"><a id="Route53Setup"></a>Route53 setup</h3>

		</div>

		<nav class="nav">
			
		</nav>


	</div>
	<div class="footer wrapper">
	<nav class="nav">
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
